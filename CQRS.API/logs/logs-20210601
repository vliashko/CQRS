{"@t":"2021-06-01T15:42:33.3980608Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:42:37.2770445Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"be97f7ff-23a2-4b6a-ab02-a6b845b932ba","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"f7a1162b-6172-401c-bf25-a12dac1810ab","$type":"PlaceCustomerOrderCommand"},"Context":"Command:f7a1162b-6172-401c-bf25-a12dac1810ab","CorrelationId":"566391b3-06b6-41ca-8a4d-f1d899d61d43"}
{"@t":"2021-06-01T15:42:37.6031375Z","@mt":"Command processing failed","@l":"Error","@x":"System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation.\r\n ---> System.ArgumentException: The expression 'p => \"EUR\"' is not a valid property expression. The expression should represent a simple property access: 't => t.MyProperty'. (Parameter 'propertyAccessExpression')\r\n   at Microsoft.EntityFrameworkCore.Infrastructure.ExpressionExtensions.GetPropertyAccess(LambdaExpression propertyAccessExpression)\r\n   at Microsoft.EntityFrameworkCore.Metadata.Builders.OwnedNavigationBuilder`2.<>c__DisplayClass3_0`1.<Property>b__0()\r\n   at Microsoft.EntityFrameworkCore.Metadata.Conventions.Internal.ConventionDispatcher.Run[T](Func`1 func, ForeignKey& foreignKey)\r\n   at Microsoft.EntityFrameworkCore.Metadata.Builders.OwnedNavigationBuilder.UpdateBuilder[T](Func`1 configure)\r\n   at Microsoft.EntityFrameworkCore.Metadata.Builders.OwnedNavigationBuilder`2.Property[TProperty](Expression`1 propertyExpression)\r\n   at CQRS.Infrastructure.Domain.Customers.CustomerEntityTypeConfiguration.<>c.<Configure>b__2_6(OwnedNavigationBuilder`2 mv) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Domain\\Customers\\CustomerEntityTypeConfiguration.cs:line 60\r\n   at Microsoft.EntityFrameworkCore.Metadata.Builders.OwnedNavigationBuilder`2.OwnsOne[TNewDependentEntity](String navigationName, Action`1 buildAction)\r\n   at CQRS.Infrastructure.Domain.Customers.CustomerEntityTypeConfiguration.<>c.<Configure>b__2_2(OwnedNavigationBuilder`2 y) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Domain\\Customers\\CustomerEntityTypeConfiguration.cs:line 58\r\n   at Microsoft.EntityFrameworkCore.Metadata.Builders.OwnedNavigationBuilder`2.OwnsMany[TNewDependentEntity](String navigationName, Action`1 buildAction)\r\n   at CQRS.Infrastructure.Domain.Customers.CustomerEntityTypeConfiguration.<>c.<Configure>b__2_1(OwnedNavigationBuilder`2 x) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Domain\\Customers\\CustomerEntityTypeConfiguration.cs:line 42\r\n   at Microsoft.EntityFrameworkCore.Metadata.Builders.EntityTypeBuilder`1.OwnsMany[TRelatedEntity](String navigationName, Action`1 buildAction)\r\n   at CQRS.Infrastructure.Domain.Customers.CustomerEntityTypeConfiguration.Configure(EntityTypeBuilder`1 builder) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Domain\\Customers\\CustomerEntityTypeConfiguration.cs:line 28\r\n   at Microsoft.EntityFrameworkCore.ModelBuilder.ApplyConfiguration[TEntity](IEntityTypeConfiguration`1 configuration)\r\n   --- End of inner exception stack trace ---\r\n   at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor, Boolean wrapExceptions)\r\n   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)\r\n   at Microsoft.EntityFrameworkCore.ModelBuilder.ApplyConfigurationsFromAssembly(Assembly assembly, Func`2 predicate)\r\n   at CQRS.Infrastructure.Database.OrdersContext.OnModelCreating(ModelBuilder modelBuilder) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Database\\OrdersContext.cs:line 27\r\n   at Microsoft.EntityFrameworkCore.Infrastructure.ModelCustomizer.Customize(ModelBuilder modelBuilder, DbContext context)\r\n   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, IConventionSetBuilder conventionSetBuilder)\r\n   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, IConventionSetBuilder conventionSetBuilder)\r\n   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel()\r\n   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()\r\n   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__7_3(IServiceProvider p)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite singletonCallSite, RuntimeResolverContext context)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)\r\n   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)\r\n   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()\r\n   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()\r\n   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()\r\n   at Microsoft.EntityFrameworkCore.DbContext.get_Model()\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()\r\n   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()\r\n   at CQRS.Infrastructure.SeedWork.DbSetExtensions.IncludePaths[TEntity](IQueryable`1 source, String[] navigationPaths) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\SeedWork\\DbSetExtensions.cs:line 12\r\n   at CQRS.Infrastructure.Domain.Customers.CustomerRepository.GetByIdAsync(CustomerId id) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Domain\\Customers\\CustomerRepository.cs:line 27\r\n   at CQRS.Application.Orders.PlaceCustomerOrder.PlaceCustomerOrderCommandHandler.Handle(PlaceCustomerOrderCommand command, CancellationToken cancellationToken) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Application\\Orders\\PlaceCustomerOrder\\PlaceCustomerOrderCommandHandler.cs:line 34\r\n   at CQRS.Infrastructure.Processing.UnitOfWorkCommandHandlerWithResultDecorator`2.Handle(T command, CancellationToken cancellationToken) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Processing\\UnitOfWorkCommandHandlerWithResultDecorator.cs:line 31\r\n   at CQRS.Infrastructure.Logging.LoggingCommandHandlerWithResultDecorator`2.Handle(T command, CancellationToken cancellationToken) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Logging\\LoggingCommandHandlerWithResultDecorator.cs:line 47","Context":"Command:f7a1162b-6172-401c-bf25-a12dac1810ab","CorrelationId":"566391b3-06b6-41ca-8a4d-f1d899d61d43"}
{"@t":"2021-06-01T15:44:12.5938138Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:44:18.5823211Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"be97f7ff-23a2-4b6a-ab02-a6b845b932ba","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"b2f0691b-cf0c-4bd7-855a-fa6c54079a9f","$type":"PlaceCustomerOrderCommand"},"Context":"Command:b2f0691b-cf0c-4bd7-855a-fa6c54079a9f","CorrelationId":"0aad3601-2b27-4c2e-a3ac-3ad1c489c98e"}
{"@t":"2021-06-01T15:44:19.6435698Z","@mt":"Command processing failed","@l":"Error","@x":"CQRS.Domain.Customers.Rules.CustomerCannotOrderMoreThan2OrdersOnTheSameDayRule: You cannot order more than 2 orders on the same day.","Context":"Command:b2f0691b-cf0c-4bd7-855a-fa6c54079a9f","CorrelationId":"0aad3601-2b27-4c2e-a3ac-3ad1c489c98e"}
{"@t":"2021-06-01T15:44:39.4269013Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"be97f7ff-23a2-4b6a-ab02-a6b845b932ba","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"647e259f-ba03-4a76-af22-8991598ff5c2","$type":"PlaceCustomerOrderCommand"},"Context":"Command:647e259f-ba03-4a76-af22-8991598ff5c2","CorrelationId":"4af8980d-0861-4014-9e90-c7cf235aaa11"}
{"@t":"2021-06-01T15:44:39.6407547Z","@mt":"Command processed successful, result {Result}","Result":"3430d5f5-49ef-4561-a92f-3981e6bee6df","Context":"Command:647e259f-ba03-4a76-af22-8991598ff5c2","CorrelationId":"4af8980d-0861-4014-9e90-c7cf235aaa11"}
{"@t":"2021-06-01T15:50:21.6141903Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:50:24.3023613Z","@mt":"Executing command {@Command}","Command":{"Email":"vladimir.lyashko02@gmail.com","Name":"vlyashko02","Id":"f4a151f7-6e5f-4087-bc21-db2ab08c86e5","$type":"RegisterCustomerCommand"},"Context":"Command:f4a151f7-6e5f-4087-bc21-db2ab08c86e5","CorrelationId":"a1f9da94-7adc-4a07-85b1-3101a8dacbcb"}
{"@t":"2021-06-01T15:50:25.2240261Z","@mt":"Command processed successful, result {Result}","Result":"CQRS.Application.Customers.CustomerDto","Context":"Command:f4a151f7-6e5f-4087-bc21-db2ab08c86e5","CorrelationId":"a1f9da94-7adc-4a07-85b1-3101a8dacbcb"}
{"@t":"2021-06-01T15:50:36.5991275Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"1aa52a97-317c-4bcd-917a-197ab660b867","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"8018ecf7-cf28-411b-b84c-3df584e57b1f","$type":"PlaceCustomerOrderCommand"},"Context":"Command:8018ecf7-cf28-411b-b84c-3df584e57b1f","CorrelationId":"6734ce06-a97b-46e4-8b65-4d03de2b64ce"}
{"@t":"2021-06-01T15:50:37.2940833Z","@mt":"Command processing failed","@l":"Error","@x":"System.NullReferenceException: Object reference not set to an instance of an object.\r\n   at CQRS.Domain.Customers.Orders.OrderProduct.CalculateValue(ProductPriceData productPrice, String currency, List`1 conversionRates) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Domain\\Customers\\Orders\\OrderProduct.cs:line 61\r\n   at CQRS.Domain.Customers.Orders.OrderProduct..ctor(ProductPriceData productPrice, Int32 quantity, String currency, List`1 conversionRates) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Domain\\Customers\\Orders\\OrderProduct.cs:line 34\r\n   at CQRS.Domain.Customers.Orders.OrderProduct.CreateForProduct(ProductPriceData productPrice, Int32 quantity, String currency, List`1 conversionRates) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Domain\\Customers\\Orders\\OrderProduct.cs:line 41\r\n   at CQRS.Domain.Customers.Orders.Order..ctor(List`1 orderProductsData, List`1 productPrices, String currency, List`1 conversionRates) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Domain\\Customers\\Orders\\Order.cs:line 50\r\n   at CQRS.Domain.Customers.Orders.Order.CreateNew(List`1 orderProductsData, List`1 allProductPrices, String currency, List`1 conversionRates) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Domain\\Customers\\Orders\\Order.cs:line 68\r\n   at CQRS.Domain.Customers.Customer.PlaceOrder(List`1 orderProductsData, List`1 allProductPrices, String currency, List`1 conversionRates) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Domain\\Customers\\Customer.cs:line 65\r\n   at CQRS.Application.Orders.PlaceCustomerOrder.PlaceCustomerOrderCommandHandler.Handle(PlaceCustomerOrderCommand command, CancellationToken cancellationToken) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Application\\Orders\\PlaceCustomerOrder\\PlaceCustomerOrderCommandHandler.cs:line 46\r\n   at CQRS.Infrastructure.Processing.UnitOfWorkCommandHandlerWithResultDecorator`2.Handle(T command, CancellationToken cancellationToken) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Processing\\UnitOfWorkCommandHandlerWithResultDecorator.cs:line 31\r\n   at CQRS.Infrastructure.Logging.LoggingCommandHandlerWithResultDecorator`2.Handle(T command, CancellationToken cancellationToken) in C:\\Users\\user\\Desktop\\training\\CQRS\\CQRS.Infrastructure\\Logging\\LoggingCommandHandlerWithResultDecorator.cs:line 47","Context":"Command:8018ecf7-cf28-411b-b84c-3df584e57b1f","CorrelationId":"6734ce06-a97b-46e4-8b65-4d03de2b64ce"}
{"@t":"2021-06-01T15:50:45.0239949Z","@mt":"Executing command {@Command}","Command":{"CustomerId":{"Value":"1aa52a97-317c-4bcd-917a-197ab660b867","$type":"CustomerId"},"Id":"b4a47ce7-8c71-4091-af82-fd7fed35e11a","$type":"MarkCustomerAsWelcomedCommand"},"Context":"Command:b4a47ce7-8c71-4091-af82-fd7fed35e11a"}
{"@t":"2021-06-01T15:52:34.1341932Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:52:46.1038908Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:52:49.7819931Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"1aa52a97-317c-4bcd-917a-197ab660b867","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"8e2a9770-e58d-4f06-a354-362c99b395be","$type":"PlaceCustomerOrderCommand"},"Context":"Command:8e2a9770-e58d-4f06-a354-362c99b395be","CorrelationId":"9a54fb1c-b400-4960-b766-68f5d8a8d4d3"}
{"@t":"2021-06-01T15:56:35.7978735Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:56:40.5849654Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"1aa52a97-317c-4bcd-917a-197ab660b867","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"67a6ba80-6b0a-4c88-958b-d0dad33497ee","$type":"PlaceCustomerOrderCommand"},"Context":"Command:67a6ba80-6b0a-4c88-958b-d0dad33497ee","CorrelationId":"46b5bad8-f30f-497c-8e6f-c62d5a84f7f8"}
{"@t":"2021-06-01T15:57:38.2608094Z","@mt":"Logger configured"}
{"@t":"2021-06-01T15:57:42.9780792Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"1aa52a97-317c-4bcd-917a-197ab660b867","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"24ef4995-6184-4706-9d46-43d7c99ee79a","$type":"PlaceCustomerOrderCommand"},"Context":"Command:24ef4995-6184-4706-9d46-43d7c99ee79a","CorrelationId":"a4ab12e1-3bd1-4eed-9788-4dd730840e43"}
{"@t":"2021-06-01T15:57:44.7541983Z","@mt":"Command processed successful, result {Result}","Result":"e381d0e4-e8f7-4c73-8ce5-2ea295c6874f","Context":"Command:24ef4995-6184-4706-9d46-43d7c99ee79a","CorrelationId":"a4ab12e1-3bd1-4eed-9788-4dd730840e43"}
{"@t":"2021-06-01T15:57:45.0641790Z","@mt":"Executing command {@Command}","Command":{"CustomerId":{"Value":"1aa52a97-317c-4bcd-917a-197ab660b867","$type":"CustomerId"},"Id":"b4a47ce7-8c71-4091-af82-fd7fed35e11a","$type":"MarkCustomerAsWelcomedCommand"},"Context":"Command:b4a47ce7-8c71-4091-af82-fd7fed35e11a"}
{"@t":"2021-06-01T15:57:46.1138802Z","@mt":"Command processed successful, result {Result}","Result":"()","Context":"Command:b4a47ce7-8c71-4091-af82-fd7fed35e11a"}
{"@t":"2021-06-01T16:02:15.1507335Z","@mt":"Logger configured"}
{"@t":"2021-06-01T16:02:49.6398194Z","@mt":"Executing command {@Command}","Command":{"CustomerId":"1aa52a97-317c-4bcd-917a-197ab660b867","Products":[{"Id":"e81b7af5-0e0d-4822-a3dd-0ea908d9d087","Quantity":3,"Name":null,"$type":"ProductDto"}],"Currency":"USD","Id":"29da69bb-4e9a-4943-aa5b-08b9fbb9e311","$type":"PlaceCustomerOrderCommand"},"Context":"Command:29da69bb-4e9a-4943-aa5b-08b9fbb9e311","CorrelationId":"b319b247-fd44-4023-a22a-1a7c7eb28961"}
{"@t":"2021-06-01T16:02:50.8605164Z","@mt":"Command processed successful, result {Result}","Result":"8a02b6ae-5250-49a2-b1de-1175f68d7537","Context":"Command:29da69bb-4e9a-4943-aa5b-08b9fbb9e311","CorrelationId":"b319b247-fd44-4023-a22a-1a7c7eb28961"}
